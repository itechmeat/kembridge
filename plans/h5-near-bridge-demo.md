# H5. –î–µ–º–æ NEAR Bridge –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ üîó –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø CROSS-CHAIN

## üéØ –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π NEAR –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è –ø–æ–∫–∞–∑–∞ –ø–æ–ª–Ω–æ–π cross-chain —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ KEMBridge –Ω–∞ —Ö–∞–∫–∞—Ç–æ–Ω–µ.

## üìã –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
- ‚úÖ NEAR –∞–¥–∞–ø—Ç–µ—Ä –±–∞–∑–æ–≤–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å Chain Signatures
- ‚úÖ 1Click API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞  
- ‚úÖ NEAR Event Listeners —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ NEAR –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å–æ–∑–¥–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –ª–æ–∫–∞–ª—å–Ω–æ
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –¥–µ–º–æ
- ‚úÖ NEAR –∞–¥–∞–ø—Ç–µ—Ä –º–µ—Ç–æ–¥—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –¥–µ–º–æ —Å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ Backend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å NEAR bridge –∑–∞–≤–µ—Ä—à–µ–Ω–∞
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã NEAR —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ

## üöÄ –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –°–æ–∑–¥–∞–Ω–∏–µ NEAR –¥–µ–º–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ ‚úÖ
- ‚úÖ –°–æ–∑–¥–∞–Ω —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π NEAR –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è –¥–µ–º–æ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ lock/unlock/mint/burn
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Chain Signatures
- ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–µ–ø–ª–æ–µ–º –Ω–∞ NEAR testnet (—Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏)

### –≠—Ç–∞–ø 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π ‚úÖ
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω NEARAdapter –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —Å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω event listening –¥–ª—è –¥–µ–º–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å BridgeService –∏ SwapEngine

### –≠—Ç–∞–ø 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–µ–º–æ ‚úÖ
- ‚úÖ NEAR –∫–æ–Ω—Ç—Ä–∞–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ testnet 
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å cross-chain –æ–ø–µ—Ä–∞—Ü–∏–∏ ETH ‚Üî NEAR (backend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
- ‚úÖ –°–æ–∑–¥–∞—Ç—å –¥–µ–º–æ —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è —Ö–∞–∫–∞—Ç–æ–Ω–∞
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ –í—Å–µ unit —Ç–µ—Å—Ç—ã NEAR –∞–¥–∞–ø—Ç–µ—Ä–∞ –ø—Ä–æ—Ö–æ–¥—è—Ç

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### NEAR –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```rust
// –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–µ–º–æ
pub fn lock_tokens(&mut self, amount: U128, eth_recipient: String)
pub fn unlock_tokens(&mut self, amount: U128, proof: String)
pub fn mint_tokens(&mut self, amount: U128, recipient: String)
pub fn burn_tokens(&mut self, amount: U128)
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ç–æ—á–∫–∏
- –§–∞–π–ª: `backend/crates/kembridge-blockchain/src/near/adapter.rs`
- –ó–∞–º–µ–Ω–∞ –º–æ–∫–æ–≤ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Chain Signatures –¥–ª—è –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- üîó –¢—Ä–µ–±—É–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Ethereum SimpleBridge (—É–∂–µ –≥–æ—Ç–æ–≤)
- üîó –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å BridgeService (—É–∂–µ –≥–æ—Ç–æ–≤)
- üîó –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π NEARAdapter

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –¥–µ–º–æ
- –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è —Ö–∞–∫–∞—Ç–æ–Ω–∞
- –§–æ–∫—É—Å –Ω–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏, –Ω–µ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–µ–π –±–µ–∑ –ø–æ–ª–Ω–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

## üé™ –î–µ–º–æ —Å—Ü–µ–Ω–∞—Ä–∏–π
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–ª–æ–∫–∏—Ä—É–µ—Ç ETH –Ω–∞ Ethereum
2. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∏–Ω—Ç–∏—Ç —Ç–æ–∫–µ–Ω—ã –Ω–∞ NEAR
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –æ–±—Ä–∞—Ç–Ω–æ —Å NEAR –Ω–∞ Ethereum
4. –ü–æ–∫–∞–∑ real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å–∞

## üìÅ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### NEAR –∫–æ–Ω—Ç—Ä–∞–∫—Ç
- `near-contracts/src/lib.rs` - –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- `near-contracts/Cargo.toml` - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `near-contracts/build.sh` - –°–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏ WASM
- `near-contracts/deploy.sh` - –°–∫—Ä–∏–ø—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- `near-contracts/out/kembridge_near_contract.wasm` - –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç

### Backend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- `backend/crates/kembridge-blockchain/src/near/adapter.rs` - –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∞–¥–∞–ø—Ç–µ—Ä
- `backend/tests/test_near_bridge_demo.rs` - –¢–µ—Å—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –ê–∫–∫–∞—É–Ω—Ç NEAR
- –°–æ–∑–¥–∞–Ω –∞–∫–∫–∞—É–Ω—Ç: `kembridge-demo.testnet`
- –ö–æ–Ω—Ç—Ä–∞–∫—Ç —Å–æ–±—Ä–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

## üîß –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞
```bash
cd near-contracts
cargo build --target wasm32-unknown-unknown --release
cp target/wasm32-unknown-unknown/release/kembridge_near_contract.wasm out/
```

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (–≤ —Å–ª—É—á–∞–µ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º)
```bash
# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –±–µ–∑ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
near contract deploy kembridge-demo.testnet use-file out/kembridge_near_contract.wasm without-init-call network-config testnet sign-with-keychain send

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
near contract call-function as-transaction kembridge-demo.testnet new json-args '{"user": "kembridge-demo.testnet", "status": "KEMBridge Demo Initialized"}' prepaid-gas '30.0 Tgas' attached-deposit '0 NEAR' sign-as kembridge-demo.testnet network-config testnet sign-with-keychain send
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
near contract call-function as-read-only kembridge-demo.testnet get_version json-args '{}' network-config testnet now

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
near contract call-function as-transaction kembridge-demo.testnet set_status json-args '{"message": "Test message"}' prepaid-gas '30.0 Tgas' attached-deposit '0 NEAR' sign-as kembridge-demo.testnet network-config testnet sign-with-keychain send
```

## üìä –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞
- ‚úÖ NEAR –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∫–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å backend —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- ‚úÖ –î–µ–º–æ —Å—Ü–µ–Ω–∞—Ä–∏–π –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω
- ‚úÖ NEAR –∫–æ–Ω—Ç—Ä–∞–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ testnet
- ‚úÖ Real-time –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ backend
- ‚úÖ –í—Å–µ NEAR –∞–¥–∞–ø—Ç–µ—Ä —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
- ‚úÖ Backend —Å–µ—Ä–≤–∏—Å –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è —Å NEAR –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
- ‚úÖ Cross-chain —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å ETH ‚Üî NEAR –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ